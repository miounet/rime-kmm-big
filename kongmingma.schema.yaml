# Rime schema
# encoding: utf-8

schema:
  schema_id: kongmingma
  name: ç©ºæ˜ç -å¹¶å‡»
  version: 2022/07/01
  author:
    - ç©ºæ˜
    - zhanghaozhecn(schemaç¼–å†™)
  description: |
    ç©ºæ˜ç ï¼Œæ˜¯ä¸“é—¨å¹¶å‡»ç¼–ç æ–¹æ¡ˆï¼Œæœ‰éŸ³å•å­—æ— é‡ç ï¼Œ400ä¸‡å¤§è¯åº“ï¼Œç é•¿çŸ­(å¹³å‡0.65)ï¼Œ8ä¸‡é«˜é¢‘è¯é‡ç å°‘(0.09%)çš„ç‰¹ç‚¹ã€‚ä¸­å·éŸµæ˜¯ä¸€æ¬¾æ”¯æŒé”®ç›˜å¹¶å‡»çš„å¹³å°ä»¶ï¼Œå¯ä»¥è‡ªå®šä¹‰è¯åº“ç¼–ç ï¼Œå¹¶å‡»å¹³å°ã€‚
  dependencies:

switches:
  - name: ascii_mode
    reset: 0
    states: [ ä¸­, è‹± ]
  - name: full_shape
    states: [ åŠè§’, å…¨è§’ ]
  - name: ascii_punct
    states: [ ã€‚ï¼Œ, ï¼ï¼Œ ]
  - name: zh_trad
    reset: 0
    states: [ ç®€,ç¹ ]
  - name: emoji_suggestion
    reset: 0
    states: ["ğŸˆšï¸", "ğŸˆ¶"]

engine:
  filters:
    - simplifier
    - uniquifier
    - lua_filter@single_char_filter
  processors:
    - ascii_composer
    - recognizer
    - chord_composer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - table_translator
    - "affix_segmentor@mkst" #ç²¾å‡†é€ è¯
    - "lua_translator@helper" #é”®å…¥helpå‡ºå¸®åŠ©èœå•
    - "lua_translator@time_date" #é”®å…¥dateå‡ºæ—¥æœŸç­‰åŠŸèƒ½
    - "lua_translator@date_translator" #é”®å…¥dateå‡ºæ—¥æœŸç­‰åŠŸèƒ½

# ç®€ä½“è½¬ç¹ä½“
simplifier:
  opencc_config: s2t.json
  option_name: zh_trad

emoji_suggestion: #emojiè¡¨æƒ…ï¼Œè°ƒç”¨openccé‡Œçš„æ–‡ä»¶
  opencc_config: emoji.json
  option_name: emoji_suggestion
  tips: all
  
veng:
  dictionary: english
  tag: veng
  prefix: "'"
  suffix: " "
  tips: "ã€”ä¸´æ—¶è‹±æ–‡ã€•"
  enable_completion: true
  enable_encoder: false
  enable_user_dict: false
  enable_sentence: false
  initial_quality: -1

speller:
  # æ— åç»­ç¼–ç è‡ªåŠ¨ä¸Šå±ï¼Œéœ€é…åˆenable_completion
  auto_select: true

  # è¿›å…¥è¾“å…¥åŒºçš„å­—ç¬¦
  alphabet: "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ,.?!<;:/='`7890`~@*_"
  algebra:

chord_composer:
  # è¿›å…¥å¹¶å‡»çš„æŒ‰é”®ï¼ŒæŒ‰ç…§é”®ç›˜ä»å·¦åˆ°å³çš„é¡ºåºæ’åº
  alphabet: "qazwsxedcrfvtgbyhnujmik,ol.p;/'7890 "
  algebra:
    - xform/(asdf)/0/
    - xform/(jkl;)/@/
    - xform/(sdf)/7/
    - xform/(jkl)/`/
    - xform/(wer)/8/
    - xform/(uio)/~/
    - xform/(xcv)/9/
    - xform/(nm)/m/
    - xlit|;,./|FDJG|
    - xform/^([qwertasdfgzxcvb]+)$/$1=/
    - xform/^([yuiophjklFnmDJG])/=$1/
    - xform|([A-Za-z])|$1-|
    - xform/^([7890]+)$/$1=/
    - xform/(78)/`/
    - xform/(89)/~/
    - xform/(79)/@/
    - xform/(70)/*/
    - xform/(90)/_/
    - xform/(w-g-|h-o-)/U/
    - xform/(r-g-|h-u-)/*/
    - xform/(q-g-|h-p-)/Q/
    - xform/(e-g-|h-i-)/I/
    - xform/(w-e-f-|j-i-o-)/I/
    - xform/(s-e-r-|u-i-l-)/U/
    - xform/(s-e-f-|j-i-l-)/Q/
    - xform/(w-d-f-|j-k-o-)/_/
    - xform/(s-d-v-|m-k-l-)/C/
    - xform/(j-o-|w-f-)/h/
    - xform/(d-f-|j-k-)/j/
    - xform/(s-d-|k-l-)/k/
    - xform/(s-f-|j-l-)/l/
    - xform/(a-b-)/l/
    - xform/(s-b-)/l/
    - xform/(s-f-|h-l-)/F/
    - xform/(a-f-|j-F-)/;/
    - xform/(a-s-|l-F-)/:/
    - xform/(s-c-|m-l-)/n/
    - xform/(D-l-)/n/
    - xform/(c-v-|m-D-)/m/
    - xform/(x-c-|D-J-)/,/
    - xform/(a-t-|y-F-)/</
    - xform/(x-v-|m-J-)/./
    - xform/(a-g-|h-F-)/!/
    - xform=(z-v-|m-G-)=/=
    - xform/(z-x-|J-G-)/?/
    - xform/(e-f-|j-i-)/y/
    - xform/(e-r-|u-i-)/u/
    - xform/(w-e-|i-o-)/i/
    - xform/(w-r-|u-o-)/o/
    - xform/(q-r-|u-p-)/p/
    - xform/(q-v-|m-p-)/Q/
    - xform/(w-v-|m-o-)/W/
    - xform/(w-v-|n-o-)/W/
    - xform/(e-v-|m-i-)/E/
    - xform/(e-v-|n-i-)/E/
    - xform/(e-t-|y-i-)/R/
    - xform/(q-t-|y-p-)/T/
    - xform/(a-v-|m-F-)/A/
    - xform/(s-v-|n-l-)/S/
    - xform/(d-v-|m-k-)/D/
    - xform/(s-g-|h-l-)/F/
    - xform/(d-g-|h-k-)/G/
    - xform/(q-w-|o-p-)/B/
    - xform/(z-f-|j-G-)/Z/
    - xform/(x-d-|k-J-)/X/
    - xform/(a-c-|D-F-)/C/
    - xform/(c-f-|j-D-)/C/
    - xform/(z-s-|l-G-)/V/
    - xform/(w-t-|y-o-)/Y/
    - xform/(q-f-|j-p-)/P/
    - xform/(a-w-|o-F-)/O/
    - xform/(a-r-|u-F-)/H/
    - xform/(s-r-|u-l-)/L/
    - xform/(d-r-|u-k-)/K/
    - xform/(x-f-|j-J-)/J/
    - xform/(s-e-|i-l-)/N/
    - xform/(w-d-|k-o-)/M/
    - xform/[aF]-/a/
    - xform/[sl]-/s/
    - xform/[dk]-/d/
    - xform/[fj]-/f/
    - xform/[gh]-/g/
    - xform/[zG]-/z/
    - xform/[xJ]-/x/
    - xform/[cD]-/c/
    - xform/[vm]-/v/
    - xform/[bn]-/b/
    - xform/[qp]-/q/
    - xform/[wo]-/w/
    - xform/[ei]-/e/
    - xform/[ru]-/r/
    - xform/[ty]-/t/
    - xform/^\S{3,}$//
  # å¹¶å‡»è¿‡ç¨‹ä¸­å¥—ç”¨çš„å¼æ ·
  prompt_format:
    # åŠ æ–¹æ‹¬å·
    - 'xform/^(.*)$/[$1]/'

translator:
  dictionary: kongmingma
  enable_charset_filter: false           # å¼€å¯å­—ç¬¦é›†è¿‡æ»¤
  enable_completion: true               # æ˜¯å¦æ˜¾ç¤ºç¼–ç æœªè¾“å…¥å®Œæ•´çš„è¯æ¡
  enable_sentence: false               # å¥å­è¾“å…¥æ¨¡å¼
  enable_user_dict: false               # æ˜¯å¦å¼€å¯ç”¨æˆ·è¯å…¸ï¼ˆç”¨æˆ·è¯å…¸è®°å½•åŠ¨æ€å­—è¯é¢‘ï¼Œç”¨æˆ·è¯ï¼‰
  enable_encoder: false
  preedit_format:
  # ä¸æ˜¾ç¤ºé€ç æç¤º
  comment_format:
    - xform/~//
    #- xform/.*//

key_binder:
  bindings:
    - { when: composing, accept: BackSpace, send: Escape }
    - { when: composing, accept: Return, send: Escape }
    - { accept: bracketleft, send: Page_Up, when: paging }
    - { accept: bracketright, send: Page_Down, when: has_menu }
    - { when: composing, accept: Shift_L, send: 2 }
    - { when: composing, accept: Shift_R, send: 3 }    
    - {accept: "Control+Shift+4", toggle: zh_trad, when: always} #ç¹ç®€å¼€å…³
    - {accept: "Control+Shift+dollar", toggle: zh_trad, when: always} #ç¹ç®€å¼€å…³
    - {accept: "Control+Shift+F", toggle: zh_trad, when: always} #ç¹ç®€å¼€å…³
    - {accept: "Control+Shift+G", toggle: emoji_suggestion, when: always} #emoji
    - {accept: "Control+Shift+K", toggle: single_char, when: always} #å•å­—æ¨¡å¼

# ç”¨å¤§å†™é”å®šåˆ‡æ¢ä¸­è‹±æ–‡
ascii_composer:
  good_old_caps_lock: true
  switch_key:
    Control_L: clear # noop æ—  |clear å­—ç¬¦è¢«æ¸…é™¤ï¼Œè½¬è‹±æ–‡è¾“å…¥
    Control_R: clear # noop æ—  |commit_text è¾“å…¥ä¸€æ®µç¼–ç å­—ç¬¦åæ±‰å­—ä¸Šå±ï¼Œè½¬è‹±æ–‡è¾“å…¥
    Shift_L: noop
    Shift_R: noop
    Caps_Lock: clear
    Eisu_toggle: clear
